<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tu GuÃ­a PrÃ¡ctica para una AlimentaciÃ³n Saludable ğŸ½ï¸</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

  body {
    font-family: 'Roboto', sans-serif;
    margin:0;
    padding:0;
    background: linear-gradient(135deg, #f0f7f4 0%, #d4e8db 100%);
    color:#2c3e50;
  }

  .container {
    max-width:1200px;
    margin:0 auto;
    padding:40px 20px;
  }

  h1 {
    text-align:center;
    color:#27ae60;
    font-size:2.7em;
    margin-bottom:40px;
  }

  form {
    display:grid;
    gap:18px;
    max-width:620px;
    margin:0 auto 50px;
    background:white;
    padding:35px;
    border-radius:16px;
    box-shadow:0 8px 30px rgba(0,0,0,0.1);
  }

  label {font-weight:600; color:#34495e;}
  input,select {
    padding:14px 16px;
    border:1px solid #bdc3c7;
    border-radius:8px;
    font-size:1em;
  }

  button {
    padding:15px;
    background:#27ae60;
    color:white;
    border:none;
    border-radius:8px;
    font-size:1.1em;
    font-weight:600;
    cursor:pointer;
  }

  button:hover {background:#219653;}

  #results {
    max-width:800px;
    margin:0 auto 50px;
    padding:30px;
    background:white;
    border-radius:16px;
    box-shadow:0 8px 30px rgba(0,0,0,0.1);
  }

  #meal-options {
    display:flex;
    flex-direction:column;
    gap:50px;
  }

  .group-section {
    background:#f9fff9;
    padding:30px;
    border-radius:14px;
    border:1px solid #e0f2e9;
  }

  .group-section h2 {
    color:#27ae60;
    font-size:1.7em;
    margin-bottom:20px;
    text-align:center;
  }

  .group-options {
    display:flex;
    flex-wrap:wrap;
    gap:25px;
  }

  .meal-option {
    flex:1 1 360px;
    background:white;
    padding:22px;
    border-radius:12px;
    border:1px solid #d5f5e3;
    box-shadow:0 4px 15px rgba(0,0,0,0.07);
  }

  .meal-option h3 {
    margin:0 0 16px;
    color:#27ae60;
    font-size:1.3em;
    text-align:center;
  }

  .meal-option ul {
    list-style:none;
    padding:0;
    margin:0;
  }

  .meal-option li {
    padding:10px 14px;
    margin-bottom:10px;
    background:#f5fff5;
    border-radius:8px;
    font-size:1em;
  }

  .meal-option li strong {
    color:#1e8449;
  }

  .emoji {
    font-size:1.5em;
    margin-left:10px;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Tu GuÃ­a PrÃ¡ctica para una AlimentaciÃ³n Saludable ğŸ½ï¸ğŸ¥—ğŸ’ª</h1>

  <form id="user-form">
    <label for="age">Edad (aÃ±os):</label>
    <input type="number" id="age" min="14" max="70" required>

    <label for="sex">Sexo:</label>
    <select id="sex" required>
      <option value="male">Hombre</option>
      <option value="female">Mujer</option>
    </select>

    <label for="weight">Peso (kg):</label>
    <input type="number" id="weight" step="0.1" required>

    <label for="height">Estatura (cm):</label>
    <input type="number" id="height" required>

    <label for="objective">Objetivo:</label>
    <select id="objective" required>
      <option value="muscle">Aumentar masa muscular</option>
      <option value="loss">Perder grasa / bajar peso</option>
      <option value="tone">Tonificar / recomposiciÃ³n</option>
      <option value="maintain">Mantenimiento</option>
    </select>

    <label for="training-days">DÃ­as de entrenamiento/semana:</label>
    <input type="number" id="training-days" min="0" max="7" required>

    <label for="training-duration">Minutos por sesiÃ³n (promedio):</label>
    <input type="number" id="training-duration" min="20" required>

    <label for="meals">Comidas al dÃ­a:</label>
    <select id="meals">
      <option value="4">4 comidas</option>
      <option value="5">5 comidas</option>
    </select>

    <label for="walks">Minutos de caminata/dÃ­a (aprox):</label>
    <input type="number" id="walks" min="0" value="0">

    <button type="submit">Calcular mi guÃ­a ğŸ</button>
  </form>

  <div id="results" style="display:none;">
    <h2>Tus macros diarios estimados</h2>
    <p id="bmi"></p>
    <p id="calories"></p>
    <p id="proteins"></p>
    <p id="carbs"></p>
    <p id="fats"></p>
    <p id="fiber"></p>

    <h2>Elige una comida para ver opciones ğŸ²ğŸ¥¦</h2>
    <select id="meal-select">
      <option value="">-- Selecciona --</option>
      <option value="desayuno">Desayuno ğŸŒ…</option>
      <option value="colacion">ColaciÃ³n maÃ±ana ğŸ¥œ</option>
      <option value="almuerzo">Almuerzo ğŸ½ï¸</option>
      <option value="merienda">Merienda ğŸ¥ª</option>
      <option value="cena">Cena ğŸŒ™</option>
    </select>

    <div id="meal-options"></div>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//                  ALIMENTOS BASE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const foodMacros = {
  'yogur griego natural':   {prot:18,fat:5,hc:4,fib:0},
  'ricota magra':           {prot:11,fat:5,hc:3,fib:0},
  'huevo entero':           {prot:12,fat:10,hc:0.5,fib:0},
  'atÃºn en agua escurrido': {prot:25,fat:1,hc:0,fib:0},
  'pechuga de pollo':       {prot:23,fat:3,hc:0,fib:0},
  'muslo pollo sin piel':   {prot:20,fat:8,hc:0,fib:0},
  'carne magra vacuna':     {prot:22,fat:7,hc:0,fib:0},
  'pescado blanco':         {prot:21,fat:2,hc:0,fib:0},
  'batido proteÃ­na scoop':  {prot:25,fat:2,hc:3,fib:0,fixed:true},
  'palta':                  {prot:2,fat:15,hc:9,fib:7},
  'aceite oliva':           {prot:0,fat:100,hc:0,fib:0},
  'frutos secos mixtos':    {prot:18,fat:52,hc:18,fib:10},
  'avena instantÃ¡nea':      {prot:13,fat:7,hc:66,fib:10},
  'pan integral':           {prot:9,fat:3,hc:45,fib:6},
  'arroz blanco':           {prot:7,fat:1,hc:78,fib:1},
  'papa hervida':           {prot:2,fat:0,hc:17,fib:2},
  'lentejas cocidas':       {prot:9,fat:0.5,hc:20,fib:8},
  'fideos integrales':      {prot:13,fat:2,hc:70,fib:8}
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//             OPCIONES â€“ NOMBRE CLARO + PORCIONES CONCRETAS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const mealTemplates = {
  desayuno: [
    {name:"Yogur griego con avena y frutos secos", p:"yogur griego natural", c:"avena instantÃ¡nea", f:"frutos secos mixtos", desc:"Yogur griego con avena y frutos secos ğŸ¥£ğŸŒ°"},
    {name:"Tostadas con ricota y palta", p:"ricota magra", c:"pan integral", f:"palta", desc:"Tostadas integrales con ricota y palta ğŸ¥‘ğŸ"},
    {name:"Batido proteico con avena", p:"batido proteÃ­na scoop", c:"avena instantÃ¡nea", f:null, desc:"Batido de proteÃ­na con avena ğŸ¥¤"},
    {name:"Huevos revueltos con tostadas", p:"huevo entero", c:"pan integral", f:"aceite oliva", desc:"Huevos revueltos + tostadas ğŸ³ğŸ"}
  ],

  colacion: [
    {name:"Yogur griego con frutos secos", p:"yogur griego natural", c:null, f:"frutos secos mixtos", desc:"Yogur griego + almendras/nueces ğŸ¥›ğŸŒ°"},
    {name:"Batido de proteÃ­na simple", p:"batido proteÃ­na scoop", c:null, f:null, desc:"Batido de proteÃ­na solo ğŸ¥¤"},
    {name:"AtÃºn con palta", p:"atÃºn en agua escurrido", c:null, f:"palta", desc:"Lata de atÃºn con Â¼ palta ğŸŸğŸ¥‘"}
  ],

  almuerzo: {
    "Carne magra vacuna": [
      {p:"carne magra vacuna", c:"arroz blanco", f:"aceite oliva", desc:"Carne magra con arroz integral", fibra:"ensalada chica (100g tomate + 50g lechuga)"},
      {p:"carne magra vacuna", c:"papa hervida", f:"aceite oliva", desc:"Carne magra con papas al horno", fibra:"brÃ³coli cocido (150g)"},
      {p:"carne magra vacuna", c:"fideos integrales", f:"aceite oliva", desc:"Carne magra con fideos integrales", fibra:"tomate fresco (150g)"},
      {p:"carne magra vacuna", c:"lentejas cocidas", f:"aceite oliva", desc:"Carne magra con lentejas", fibra:"espinacas salteadas (120g)"}
    ],
    "Pechuga de pollo": [
      {p:"pechuga de pollo", c:"arroz blanco", f:"aceite oliva", desc:"Pechuga de pollo con arroz", fibra:"ensalada chica (100g tomate + 50g lechuga)"},
      {p:"pechuga de pollo", c:"papa hervida", f:"aceite oliva", desc:"Pechuga de pollo con papas", fibra:"lechuga y zanahoria (150g total)"},
      {p:"pechuga de pollo", c:"fideos integrales", f:"aceite oliva", desc:"Pechuga de pollo con fideos integrales", fibra:"brÃ³coli al vapor (150g)"},
      {p:"pechuga de pollo", c:"lentejas cocidas", f:"aceite oliva", desc:"Pechuga de pollo con lentejas", fibra:"espinacas frescas (120g)"}
    ],
    "Muslo de pollo (sin piel)": [
      {p:"muslo pollo sin piel", c:"arroz blanco", f:"aceite oliva", desc:"Muslo sin piel con arroz", fibra:"ensalada mixta chica (lechuga 50g + tomate 50g)"},
      {p:"muslo pollo sin piel", c:"papa hervida", f:"aceite oliva", desc:"Muslo sin piel con papas", fibra:"zanahorias cocidas (150g)"},
      {p:"muslo pollo sin piel", c:"fideos integrales", f:"aceite oliva", desc:"Muslo sin piel con fideos integrales", fibra:"espÃ¡rragos (150g)"},
      {p:"muslo pollo sin piel", c:"lentejas cocidas", f:"aceite oliva", desc:"Muslo sin piel con lentejas", fibra:"tomate y cebolla (150g total)"}
    ],
    "Pescado blanco": [
      {p:"pescado blanco", c:"arroz blanco", f:"aceite oliva", desc:"Pescado blanco con arroz", fibra:"ensalada chica (lechuga 50g + tomate 50g)"},
      {p:"pescado blanco", c:"papa hervida", f:"aceite oliva", desc:"Pescado blanco con papas", fibra:"zanahorias al vapor (150g)"},
      {p:"pescado blanco", c:"fideos integrales", f:"aceite oliva", desc:"Pescado blanco con fideos integrales", fibra:"espÃ¡rragos (150g)"},
      {p:"pescado blanco", c:"lentejas cocidas", f:"aceite oliva", desc:"Pescado blanco con lentejas", fibra:"espinacas frescas (120g)"}
    ],
    "Carne de cerdo magra": [
      {p:"carne magra vacuna", c:"arroz blanco", f:"aceite oliva", desc:"Cerdo magro con arroz", fibra:"brÃ³coli al vapor (150g)"},
      {p:"carne magra vacuna", c:"papa hervida", f:"aceite oliva", desc:"Cerdo magro con papas", fibra:"espinacas salteadas (120g)"}
    ]
  },

  merienda: [
    {name:"Yogur griego con frutos secos", p:"yogur griego natural", c:null, f:"frutos secos mixtos", desc:"Yogur griego + frutos secos ğŸ¥›ğŸŒ°"},
    {name:"SÃ¡ndwich de atÃºn con palta", p:"atÃºn en agua escurrido", c:"pan integral", f:"palta", desc:"SÃ¡ndwich chico de atÃºn con palta ğŸ¥ªğŸŸğŸ¥‘"},
    {name:"SÃ¡ndwich de pechuga", p:"pechuga de pollo", c:"pan integral", f:null, desc:"SÃ¡ndwich frÃ­o de pechuga ğŸ¥ªğŸ—"},
    {name:"Batido proteico", p:"batido proteÃ­na scoop", c:null, f:null, desc:"Batido de proteÃ­na post-entreno ğŸ¥¤ğŸ’ª"}
  ],

  cena: {
    "Carne magra vacuna": [
      {p:"carne magra vacuna", c:"papa hervida", f:"aceite oliva", desc:"Carne magra con papas", fibra:"ensalada chica (lechuga 50g + tomate 50g)"},
      {p:"carne magra vacuna", c:"arroz blanco", f:"aceite oliva", desc:"Carne magra con arroz", fibra:"lechuga fresca (100g)"},
      {p:"carne magra vacuna", c:"fideos integrales", f:"aceite oliva", desc:"Carne magra con fideos integrales", fibra:"tomate fresco (150g)"},
      {p:"carne magra vacuna", c:"lentejas cocidas", f:"aceite oliva", desc:"Carne magra con lentejas", fibra:"brÃ³coli cocido (150g)"}
    ],
    "Pechuga de pollo": [
      {p:"pechuga de pollo", c:"papa hervida", f:"aceite oliva", desc:"Pechuga con papas", fibra:"ensalada chica (lechuga 50g + tomate 50g)"},
      {p:"pechuga de pollo", c:"arroz blanco", f:"aceite oliva", desc:"Pechuga con arroz", fibra:"tomate fresco (100g)"},
      {p:"pechuga de pollo", c:"fideos integrales", f:"aceite oliva", desc:"Pechuga con fideos integrales", fibra:"brÃ³coli al vapor (150g)"},
      {p:"pechuga de pollo", c:"lentejas cocidas", f:"aceite oliva", desc:"Pechuga con lentejas", fibra:"espinacas frescas (120g)"}
    ],
    "Muslo de pollo (sin piel)": [
      {p:"muslo pollo sin piel", c:"papa hervida", f:"aceite oliva", desc:"Muslo sin piel con papas", fibra:"ensalada chica (lechuga 50g + tomate 50g)"},
      {p:"muslo pollo sin piel", c:"arroz blanco", f:"aceite oliva", desc:"Muslo sin piel con arroz", fibra:"espinacas frescas (100g)"},
      {p:"muslo pollo sin piel", c:"fideos integrales", f:"aceite oliva", desc:"Muslo sin piel con fideos integrales", fibra:"zanahorias cocidas (100g)"},
      {p:"muslo pollo sin piel", c:"lentejas cocidas", f:"aceite oliva", desc:"Muslo sin piel con lentejas", fibra:"ensalada mixta chica (lechuga 50g + tomate 50g)"}
    ],
    "Pescado blanco": [
      {p:"pescado blanco", c:"papa hervida", f:"aceite oliva", desc:"Pescado con papas", fibra:"ensalada de tomate (150g)"},
      {p:"pescado blanco", c:"arroz blanco", f:"aceite oliva", desc:"Pescado con arroz", fibra:"espÃ¡rragos al vapor (150g)"},
      {p:"pescado blanco", c:"fideos integrales", f:"aceite oliva", desc:"Pescado con fideos integrales", fibra:"brÃ³coli y zanahoria (150g total)"}
    ]
  }
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//                   FUNCIONES AUXILIARES
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function roundPractical(v) {
  if (v <= 30) return Math.round(v/5)*5;
  if (v <= 100) return Math.round(v/10)*10;
  return Math.round(v/25)*25;
}

function calcBMR(w,a,s) {
  if (a<18) return s==='male'?17.5*w+651:12.2*w+746;
  if (a<30) return s==='male'?15.3*w+679:14.7*w+496;
  return s==='male'?11.6*w+879:8.7*w+829;
}

function getTDEE(bmr,days,minSess,walkMin) {
  let f=1.2;
  const h = (days*minSess/60) + (walkMin*7/60);
  if(h>10) f=1.725;
  else if(h>5) f=1.55;
  else if(h>2) f=1.375;
  return bmr*f;
}

function getMacros(tdee,w,obj) {
  const pMult = obj==='muscle'?1.9 : obj==='loss'?1.8 : obj==='tone'?1.7 : 1.4;
  let prot = w * pMult;
  let fat = w * 0.9;
  const cMult = obj==='muscle'?1.25 : obj==='loss'?0.65 : obj==='tone'?0.8 : 1.0; // +25% carbs en muscle
  let carb = (tdee - prot*4 - fat*9)/4 * cMult;
  const fib = (obj==='loss'||obj==='tone') ? 34 : 28;

  return {
    proteins:Math.round(prot),
    carbs:Math.round(carb),
    fats:Math.round(fat),
    fiber:fib
  };
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//                   EVENTOS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const form = document.getElementById('user-form');
const results = document.getElementById('results');
const mealSel = document.getElementById('meal-select');
const optDiv = document.getElementById('meal-options');

let macros = {};
let objGlobal = 'maintain';
let nMeals = 4;

form.addEventListener('submit',e=>{
  e.preventDefault();

  const a = +document.getElementById('age').value;
  const s = document.getElementById('sex').value;
  const w = +document.getElementById('weight').value;
  const h = +document.getElementById('height').value/100;
  objGlobal = document.getElementById('objective').value;
  const d = +document.getElementById('training-days').value;
  const m = +document.getElementById('training-duration').value;
  const walk = +document.getElementById('walks').value;
  nMeals = +document.getElementById('meals').value;

  const bmi = (w/(h*h)).toFixed(1);
  const bmr = calcBMR(w,a,s);
  const tdee = getTDEE(bmr,d,m,walk);
  macros = getMacros(tdee,w,objGlobal);

  document.getElementById('bmi').textContent=`IMC: ${bmi}`;
  document.getElementById('calories').textContent=`CalorÃ­as aprox: ${Math.round(tdee)} kcal ğŸ”¥`;
  document.getElementById('proteins').textContent=`ProteÃ­nas: ${macros.proteins}g ğŸ’ª`;
  document.getElementById('carbs').innerHTML = `Carbohidratos: ${macros.carbs}g ğŸš ${objGlobal==='muscle' ? '(mÃ¡s carbohidratos para volumen)' : ''}`;
  document.getElementById('fats').textContent=`Grasas: ${macros.fats}g ğŸ¥‘`;
  document.getElementById('fiber').textContent=`Fibra recomendada: ${macros.fiber}g ğŸ¥— ${objGlobal==='loss'||objGlobal==='tone' ? '(prioridad alta para bajar grasa)' : ''}`;

  results.style.display='block';
  mealSel.value='';
  optDiv.innerHTML='';
});

mealSel.addEventListener('change',e=>{
  const meal = e.target.value;
  optDiv.innerHTML='';

  if(!meal || !mealTemplates[meal]) return;

  let protPer = macros.proteins / nMeals;
  let carbPer = macros.carbs / nMeals;

  if(meal==='almuerzo' || meal==='cena') protPer *= 1.32;

  if((objGlobal==='loss' || objGlobal==='tone') && meal==='colacion') {
    carbPer = 0;
  }

  const isMain = meal==='almuerzo' || meal==='cena';

  if(Array.isArray(mealTemplates[meal])) {
    mealTemplates[meal].forEach((opt,i)=>{
      const card = document.createElement('div');
      card.className = 'meal-option';

      const h3 = document.createElement('h3');
      h3.textContent = `OpciÃ³n ${i+1}: ${opt.name}`;
      card.appendChild(h3);

      const ul = document.createElement('ul');

      let pQty = opt.fixed ? '1 scoop/porciÃ³n' 
                           : roundPractical(protPer * 100 / (foodMacros[opt.p]?.prot || 20));
      ul.innerHTML += `<li><strong>ProteÃ­na:</strong> ${pQty}g de ${opt.p} (peso crudo) ğŸ’ª</li>`;

      if(opt.c && carbPer > 5) {
        const cQty = roundPractical(carbPer * 100 / (foodMacros[opt.c]?.hc || 70));
        ul.innerHTML += `<li><strong>Carbohidrato:</strong> ${cQty}g de ${opt.c} (peso crudo) ğŸš</li>`;
      }

      let fibTxt = '';
      if (objGlobal === 'loss' || objGlobal === 'tone') {
        fibTxt = opt.fibra || 'verduras abundantes (ej: 150â€“200g brÃ³coli o ensalada mixta) ğŸ¥—';
      } else {
        fibTxt = opt.fibra || 'ensalada chica (ej: 100g tomate + 50g lechuga) ğŸ¥—';
      }
      ul.innerHTML += `<li><strong>Fibra (verduras):</strong> ${fibTxt}</li>`;

      let fatTxt = '';
      if(opt.f === 'aceite oliva' && isMain) {
        fatTxt = '1 cucharada de aceite de oliva (~10g) ğŸ«’';
      } else if(opt.f) {
        const fQty = roundPractical(macros.fats / nMeals * 0.4 * 100 / (foodMacros[opt.f]?.fat || 50));
        fatTxt = `${fQty}g aprox de ${opt.f} ğŸ¥‘ğŸŒ°`;
      }
      if(fatTxt) ul.innerHTML += `<li><strong>Grasas saludables:</strong> ${fatTxt}</li>`;

      card.appendChild(ul);
      optDiv.appendChild(card);
    });
  } else {
    Object.keys(mealTemplates[meal]).forEach(group => {
      const section = document.createElement('div');
      section.className = 'group-section';

      const h2 = document.createElement('h2');
      h2.textContent = group;
      section.appendChild(h2);

      const groupDiv = document.createElement('div');
      groupDiv.className = 'group-options';

      mealTemplates[meal][group].forEach((opt,i) => {
        const card = document.createElement('div');
        card.className = 'meal-option';

        const h3 = document.createElement('h3');
        h3.textContent = `OpciÃ³n ${i+1}: ${opt.desc}`;
        card.appendChild(h3);

        const ul = document.createElement('ul');

        let pQty = roundPractical(protPer * 100 / (foodMacros[opt.p]?.prot || 20));
        if(opt.p.includes('muslo')) pQty = Math.round(pQty * 1.12);
        ul.innerHTML += `<li><strong>ProteÃ­na:</strong> ${pQty}g de ${opt.p} (peso crudo) ğŸ’ª</li>`;

        const cQty = roundPractical(carbPer * 100 / (foodMacros[opt.c]?.hc || 70));
        ul.innerHTML += `<li><strong>Carbohidrato:</strong> ${cQty}g de ${opt.c} (peso crudo) ğŸš</li>`;

        let fibTxt = '';
        if (objGlobal === 'loss' || objGlobal === 'tone') {
          fibTxt = opt.fibra || 'verduras abundantes (ej: 150â€“200g brÃ³coli o ensalada mixta) ğŸ¥—';
        } else {
          fibTxt = opt.fibra || 'ensalada chica (ej: 100g tomate + 50g lechuga) ğŸ¥—';
        }
        ul.innerHTML += `<li><strong>Fibra (verduras):</strong> ${fibTxt}</li>`;

        ul.innerHTML += `<li><strong>Grasas saludables:</strong> 1 cucharada de aceite de oliva (~10g) ğŸ«’</li>`;

        card.appendChild(ul);
        groupDiv.appendChild(card);
      });

      section.appendChild(groupDiv);
      optDiv.appendChild(section);
    });
  }
});
</script>
</body>
</html>
