<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriFit Guide: Tu Asistente Personal para Comidas Saludables</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #e8f5e9;
            color: #333;
            line-height: 1.6;
        }
        h1 {
            color: #2e7d32;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        h2, h3 {
            color: #388e3c;
        }
        section {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        form {
            display: grid;
            gap: 15px;
        }
        label {
            font-weight: bold;
            color: #455a64;
        }
        input, select, button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
        }
        button {
            background: #4caf50;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover {
            background: #388e3c;
        }
        #macros, #meal-result {
            font-weight: bold;
            color: #1b5e20;
        }
        ul {
            list-style-type: disc;
            padding-left: 25px;
        }
        .welcome {
            text-align: center;
            font-style: italic;
            color: #616161;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>¡Bienvenido a NutriFit Guide!</h1>
    <p class="welcome">Tu asistente personal para planificar comidas saludables según tus objetivos y preferencias. Ingresa tus datos para empezar.</p>

    <section id="user-input">
        <h2>Datos Personales</h2>
        <form>
            <label>Peso (kg):</label>
            <input type="number" id="weight" required min="1">

            <label>Altura (cm):</label>
            <input type="number" id="height" required min="1">

            <label>Edad (años):</label>
            <input type="number" id="age" required min="1">

            <label>Género:</label>
            <select id="gender" required>
                <option value="male">Masculino</option>
                <option value="female">Femenino</option>
            </select>

            <label>Objetivo:</label>
            <select id="objective" required>
                <option value="loss">Pérdida de peso/grasa</option>
                <option value="maintenance">Mantenimiento</option>
                <option value="gain">Aumento de masa muscular</option>
            </select>

            <label>Nivel de Actividad Física (días por semana):</label>
            <input type="number" id="activity-days" required min="0" max="7">

            <label>Duración por sesión (minutos):</label>
            <input type="number" id="activity-duration" required min="0">

            <label>Hora del día para actividad:</label>
            <select id="activity-time">
                <option value="morning">Mañana</option>
                <option value="afternoon">Tarde</option>
                <option value="evening">Noche</option>
                <option value="any">Cualquiera</option>
            </select>

            <label>¿Realizas caminatas?</label>
            <select id="walking" required>
                <option value="yes">Sí</option>
                <option value="no">No</option>
            </select>

            <label>¿Prefieres 4 o 5 comidas al día?</label>
            <select id="meals-per-day" required>
                <option value="4">4 comidas</option>
                <option value="5">5 comidas</option>
            </select>

            <button type="button" onclick="calculateMacros()">Calcular Macros Diarios</button>
        </form>
    </section>

    <section id="macros" style="display: none;">
        <h2>Tus Macros Diarios Aproximados</h2>
        <p>Proteínas: <span id="protein">0</span> g</p>
        <p>Carbohidratos: <span id="carb">0</span> g</p>
        <p>Grasas Saludables: <span id="fat">0</span> g</p>
        <p>Fibra Recomendada: <span id="fiber">0</span> g</p>
        <p><em>Nota: Estos son estimados basados en tu objetivo y peso. Consulta a un nutricionista para ajustes personalizados. La actividad y caminatas se usan para personalizar sugerencias.</em></p>
    </section>

    <section id="meal-planner">
        <h2>Planificador de Comidas</h2>
        <p>Primero, selecciona el tipo de comida. Luego, elige fuentes respetando tus macros por comida (diarios divididos por comidas al día).</p>

        <label>Tipo de Comida:</label>
        <select id="meal-type" onchange="updateProteinOptions()">
            <option value="">Selecciona...</option>
            <option value="breakfast">Desayuno</option>
            <option value="snack">Merienda</option>
            <option value="lunch">Almuerzo</option>
            <option value="dinner">Cena</option>
        </select>

        <label>Fuente de Proteína:</label>
        <select id="protein-source"></select>

        <label>Fuente de Carbohidrato:</label>
        <select id="carb-source"></select>

        <label>Fuente de Grasa Saludable:</label>
        <select id="fat-source"></select>

        <button type="button" onclick="calculateMeal()">Calcular Cantidades para esta Comida</button>

        <div id="meal-result"></div>

        <h3>Sugerencias para Fibra y Verduras</h3>
        <p>Agrega 200-300g de verduras por comida principal (almuerzo/cena) o 100-200g para desayuno/merienda. Ejemplos:</p>
        <ul>
            <li>Ensalada mixta: lechuga, tomate, pepino (fibra alta, bajas calorías).</li>
            <li>Brócoli al vapor: 100g ~2.5g fibra.</li>
            <li>Espinacas salteadas: 150g ~3.5g fibra.</li>
            <li>Zanahorias crudas: 200g ~5.6g fibra.</li>
        </ul>
        <p>Asegúrate de alcanzar tu fibra diaria total con estas adiciones.</p>
    </section>

    <section id="breakfast-snacks">
        <h2>Opciones Adicionales para Desayunos y Meriendas</h2>
        <p>Estas son sugerencias aproximadas. Ajusta según tus macros.</p>
        
        <h3>Opciones Saladas</h3>
        <ul>
            <li>Huevos revueltos con vegetales: 2 huevos + 200g espinacas + pan integral.</li>
            <li>Tostada con aguacate: Pan integral + 50g palta + tomate.</li>
            <li>Yogur griego con pepino: 150g yogur + vegetales.</li>
        </ul>
        
        <h3>Opciones Dulces</h3>
        <ul>
            <li>Yogur griego con frutas: 150g yogur + 100g banana + semillas.</li>
            <li>Avena con almendras: 30g avena + 20g almendras + fruta.</li>
            <li>Batido de proteína: 1 serving + fruta baja en azúcar.</li>
        </ul>
    </section>

    <script>
        // Protein sources
        const proteinSources = {
            common: [
                {name: 'Carne magra', prot: 21, unit: '100g', unitName: 'g'}, // midpoint 20-22
                {name: 'Carne de cerdo', prot: 21, unit: '100g', unitName: 'g'},
                {name: 'Pollo muslo', prot: 18, unit: '100g', unitName: 'g'}, // 17-19
                {name: 'Pechuga de pollo', prot: 22, unit: '100g', unitName: 'g'}, // 21-23
                {name: 'Huevos', prot: 6, unit: 'unit', unitName: 'huevos'},
                {name: 'Pescado (atún/caballa/rio)', prot: 24, unit: '100g', unitName: 'g'} // 23-25
            ],
            breakfastSnack: [
                {name: 'Yogur griego', prot: 10, unit: '100g', unitName: 'g'}, // 9-11
                {name: 'Batido de proteína', prot: 23.5, unit: 'unit', unitName: 'servings'} // 22-25
            ]
        };

        // Carb sources
        const carbSources = [
            {name: 'Arroz blanco', carb: 77.5, unit: '100g', unitName: 'g'}, // 77-78
            {name: 'Arroz integral', carb: 73, unit: '100g', unitName: 'g'},
            {name: 'Fideos secos', carb: 73.5, unit: '100g', unitName: 'g'},
            {name: 'Avena arrollada', carb: 63, unit: '100g', unitName: 'g'},
            {name: 'Harina de trigo', carb: 75.5, unit: '100g', unitName: 'g'},
            {name: 'Polenta', carb: 79, unit: '100g', unitName: 'g'},
            {name: 'Papa', carb: 18.5, unit: '100g', unitName: 'g'},
            {name: 'Batata', carb: 20.5, unit: '100g', unitName: 'g'},
            {name: 'Mandioca', carb: 39, unit: '100g', unitName: 'g'},
            {name: 'Zapallo', carb: 7, unit: '100g', unitName: 'g'},
            {name: 'Pan blanco', carb: 49, unit: '100g', unitName: 'g'},
            {name: 'Pan integral', carb: 43.5, unit: '100g', unitName: 'g'},
            {name: 'Pan de molde', carb: 46.5, unit: '100g', unitName: 'g'},
            {name: 'Tortilla de trigo', carb: 52.5, unit: '100g', unitName: 'g'},
            {name: 'Galletas de arroz', carb: 81, unit: '100g', unitName: 'g'},
            {name: 'Banana', carb: 22.5, unit: '100g', unitName: 'g'},
            {name: 'Manzana', carb: 13.5, unit: '100g', unitName: 'g'},
            {name: 'Lentejas cocidas', carb: 20, unit: '100g', unitName: 'g'}, // ~18-22
            {name: 'Garbanzos cocidos', carb: 20, unit: '100g', unitName: 'g'},
            {name: 'Porotos cocidos', carb: 20, unit: '100g', unitName: 'g'}
        ];

        // Fat sources
        const fatSources = [
            {name: 'Aceite (1 cda ~10g grasa)', fat: 100, unit: '100g', unitName: 'g'}, // but per tbsp, but approx
            {name: 'Palta', fat: 14.5, unit: '100g', unitName: 'g'},
            {name: 'Aceitunas', fat: 12.5, unit: '100g', unitName: 'g'},
            {name: 'Almendras', fat: 49.5, unit: '100g', unitName: 'g'},
            {name: 'Nueces', fat: 65, unit: '100g', unitName: 'g'},
            {name: 'Maní', fat: 49, unit: '100g', unitName: 'g'},
            {name: 'Castañas de cajú', fat: 44, unit: '100g', unitName: 'g'},
            {name: 'Chía', fat: 30.5, unit: '100g', unitName: 'g'},
            {name: 'Lino', fat: 42, unit: '100g', unitName: 'g'},
            {name: 'Sésamo', fat: 49, unit: '100g', unitName: 'g'},
            {name: 'Girasol', fat: 50, unit: '100g', unitName: 'g'}
        ];

        // Populate selects
        function populateSelect(selectId, sources) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            sources.forEach(source => {
                const option = document.createElement('option');
                option.value = JSON.stringify(source);
                option.textContent = source.name;
                select.appendChild(option);
            });
        }

        populateSelect('carb-source', carbSources);
        populateSelect('fat-source', fatSources);

        // Update protein options based on meal type
        function updateProteinOptions() {
            const mealType = document.getElementById('meal-type').value;
            let proteins = proteinSources.common;
            if (mealType === 'breakfast' || mealType === 'snack') {
                proteins = proteins.concat(proteinSources.breakfastSnack);
            }
            populateSelect('protein-source', proteins);
        }

        function calculateBMR(weight, height, age, gender) {
            if (gender === 'male') {
                return 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                return 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }
        }

        function getActivityMultiplier(days, duration) {
            // Approximate multiplier based on inputs
            const intensity = (days * duration) / 7; // avg min per day
            if (intensity < 20) return 1.2;
            if (intensity < 40) return 1.375;
            if (intensity < 60) return 1.55;
            if (intensity < 90) return 1.725;
            return 1.9;
        }

        function calculateMacros() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseFloat(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const objective = document.getElementById('objective').value;
            const activityDays = parseFloat(document.getElementById('activity-days').value);
            const activityDuration = parseFloat(document.getElementById('activity-duration').value);
            // activityTime, walking not used in calc, but stored for future

            if (isNaN(weight) || isNaN(height) || isNaN(age) || isNaN(activityDays) || isNaN(activityDuration)) {
                alert('Por favor, ingresa valores válidos.');
                return;
            }

            // Protein
            let protMultiplier;
            if (objective === 'gain') {
                protMultiplier = 1.7; // midpoint 1.6-1.8
            } else {
                protMultiplier = (objective === 'loss' && weight > 100) ? 1.2 : 1.3; // midpoint 1.2-1.4
            }
            const dailyProtein = protMultiplier * weight;

            // Carbs
            let carbMultiplier;
            const isHighPerf = (activityDays >= 5 && activityDuration >= 60); // approximate alto rendimiento
            if (objective === 'loss') {
                carbMultiplier = 2.5;
            } else if (objective === 'maintenance') {
                carbMultiplier = 4;
            } else {
                carbMultiplier = isHighPerf ? 6 : 5; // adjust for high perf
            }
            const dailyCarb = carbMultiplier * weight;

            // Fats
            let fatMultiplier;
            if (objective === 'loss') {
                fatMultiplier = 0.7;
            } else if (objective === 'maintenance') {
                fatMultiplier = 0.9;
            } else {
                fatMultiplier = 1.1;
            }
            const dailyFat = fatMultiplier * weight;

            // Fiber
            let dailyFiber;
            if (objective === 'loss') {
                dailyFiber = 35; // midpoint 30-40
            } else if (objective === 'maintenance') {
                dailyFiber = 30;
            } else {
                dailyFiber = 27.5;
            }

            document.getElementById('protein').textContent = dailyProtein.toFixed(0);
            document.getElementById('carb').textContent = dailyCarb.toFixed(0);
            document.getElementById('fat').textContent = dailyFat.toFixed(0);
            document.getElementById('fiber').textContent = dailyFiber.toFixed(0);

            document.getElementById('macros').style.display = 'block';
        }

        function calculateMeal() {
            const dailyProtein = parseFloat(document.getElementById('protein').textContent);
            const dailyCarb = parseFloat(document.getElementById('carb').textContent);
            const dailyFat = parseFloat(document.getElementById('fat').textContent);
            const mealsPerDay = parseInt(document.getElementById('meals-per-day').value);

            const protSource = JSON.parse(document.getElementById('protein-source').value);
            const carbSource = JSON.parse(document.getElementById('carb-source').value);
            const fatSource = JSON.parse(document.getElementById('fat-source').value);

            const mealProtein = dailyProtein / mealsPerDay;
            const mealCarb = dailyCarb / mealsPerDay;
            const mealFat = dailyFat / mealsPerDay;

            const protQty = (mealProtein / protSource.prot) * (protSource.unit === '100g' ? 100 : 1);
            const carbQty = (mealCarb / carbSource.carb) * (carbSource.unit === '100g' ? 100 : 1);
            const fatQty = (mealFat / fatSource.fat) * (fatSource.unit === '100g' ? 100 : 1);

            document.getElementById('meal-result').innerHTML = `
                Para esta comida (1/${mealsPerDay} del día):<br>
                ${protSource.name}: ${protQty.toFixed(1)} ${protSource.unitName}<br>
                ${carbSource.name}: ${carbQty.toFixed(1)} ${carbSource.unitName}<br>
                ${fatSource.name}: ${fatQty.toFixed(1)} ${fatSource.unitName}<br>
                (Agrega verduras para fibra: 200-300g para comidas principales.)
            `;
        }
    </script>
</body>
</html>
